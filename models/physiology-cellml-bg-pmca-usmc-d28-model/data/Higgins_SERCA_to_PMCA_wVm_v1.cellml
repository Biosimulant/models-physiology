<?xml version='1.0' encoding='UTF-8'?>
<!-- PMCA model from the Higgins, 2006 version here - https://www.cell.com/biophysj/fulltext/S0006-3495(06)71715-5
we abuse the BG_PMCA cellML code for building this mess, including the 'units' and 'constants' external files (make sure they in paths etc)-->
<model name="Higgins_PMCA" xmlns="http://www.cellml.org/cellml/1.1#" xmlns:cellml="http://www.cellml.org/cellml/1.1#" xmlns:xlink="http://www.w3.org/1999/xlink">
    <import xlink:href="units_and_constants/units_BG_Higgins.cellml">
        <units name="mM" units_ref="mM"/>
        <units name="uM" units_ref="uM"/>
        <units name="fmol" units_ref="fmol"/>
        <units name="per_fmol" units_ref="per_fmol"/>
        <units name="J_per_mol" units_ref="J_per_mol"/>
        <units name="J_per_K_per_mol" units_ref="J_per_K_per_mol"/>
        <units name="fmol_per_sec" units_ref="fmol_per_sec"/>
        <units name="C_per_mol" units_ref="C_per_mol"/>
        <units name="pL" units_ref="pL"/>
        <units name="fF" units_ref="fF"/>
        <units name="fC" units_ref="fC"/>
        <units name="fA" units_ref="fA"/>
    </import>
    <import xlink:href="units_and_constants/constants_BG.cellml">
        <component component_ref="constants" name="constants"/>
    </import>
    <component name="environment">
        <variable name="t" public_interface="out" units="second"/>
        <!-- init-->
        <!--this corresponds to 0.1162 uM from Tong, 2011 using 38 pL for cyt vol-->
        <variable initial_value="0.0044156" name="q_Ca_i" public_interface="out" units="fmol"/>
        <!--var q_Ca_i: fmol {init: 0.00001, pub: out};-->
        <!--this corresponds to ca_ext from Tong, 2011 of 2500 mM-->
        <variable initial_value="9500" name="q_Ca_ext" public_interface="out" units="fmol"/>
        <!--var q_Ca_ext: fmol {init: 0.038, pub: out};-->
        <!--this corresponds to ~200 uM given er_vol of 0.1*34pL &#45;&#45; roughly comparable to Higgins value(s)
Higgins uses fixed amounts of ADP, ATP, P set those below
var q_ADP: fmol {init: 1.3794, pub: out};
var q_ATP: fmol {init: 3.8, pub: out};-->
        <!--altered to 1/4th each state
below state levels - note, if these are simply 1/4 may not work
instead use the Higgins constraint of P1 + P2 + (1/gamma)*(P3 + P4)
the external states are scaled by the volume ratio; if we set the total amount of pump protein to same value as Higgins:
 Pt = 15 uM -> Pt = 15*uM_to_mM*1e-3*W_i*1e-12*1e15 = 0.57 fmol
 then using gamma = 0.01 and setting P1 + P2 = 0.1, we get P3 & P4 = 0.00235
 0.1 + (1/0.01)*(0.0047) = 0.57 fmol...-->
        <variable initial_value="0.05" name="q_P1_PMCA" public_interface="out" units="fmol"/>
        <variable initial_value="0.05" name="q_P2_PMCA" public_interface="out" units="fmol"/>
        <variable initial_value="0.0024" name="q_P3_PMCA" public_interface="out" units="fmol"/>
        <variable initial_value="0.0024" name="q_P4_PMCA" public_interface="out" units="fmol"/>
        <!--var q_P_tot: amol {init: 1.0, pub: out};-->
    </component>
    <component name="PMCA_parameters">
        <!--affinities
below with setting Kc=[K_MgATP 1]; and Nc with two rows, one for phosphates and one for Ca
 Nc' =        0     0     0     0     0     0    -1     1     1   <&#45;&#45; phosphates
              0     0     0     0    -1     1     0     0     0   <&#45;&#45; Ca2+-->
        <variable initial_value="5.430482453404587e+05" name="K_P1_PMCA" public_interface="out" units="per_fmol"/>
        <variable initial_value="1.941577749543757e+03" name="K_P2_PMCA" public_interface="out" units="per_fmol"/>
        <variable initial_value="55.705521655592314" name="K_P3_PMCA" public_interface="out" units="per_fmol"/>
        <variable initial_value="0.128936490014084" name="K_P4_PMCA" public_interface="out" units="per_fmol"/>
        <variable initial_value="7.423867035246714" name="K_Ca_i" public_interface="out" units="per_fmol"/>
        <variable initial_value="0.074238670352467" name="K_Ca_ext" public_interface="out" units="per_fmol"/>
        <!--need K's for phosphates-->
        <variable initial_value="3.293062720373533e+02" name="K_ATP" public_interface="out" units="per_fmol"/>
        <variable initial_value="0.005705386792576" name="K_ADP" public_interface="out" units="per_fmol"/>
        <variable initial_value="0.005705386792576" name="K_Pi" public_interface="out" units="per_fmol"/>
        <!--reaction rates-->
        <variable initial_value="3.886341077574537e+05" name="kappa_PMCA_R1_2" public_interface="out" units="fmol_per_sec"/>
        <variable initial_value="2.868327520105214e-08" name="kappa_PMCA_R2_3" public_interface="out" units="fmol_per_sec"/>
        <variable initial_value="1.795154179118259e+10" name="kappa_PMCA_R3_4" public_interface="out" units="fmol_per_sec"/>
        <variable initial_value="37.843899707752300" name="kappa_PMCA_R4_1" public_interface="out" units="fmol_per_sec"/>
        <!--set q's for phosphates-->
        <!--var q_ATP: fmol {init: 114, pub: out};-->
        <variable initial_value="0.38" name="q_ADP" public_interface="out" units="fmol"/>
        <!--var q_Pi: fmol {init: 114, pub: out};-->
        <!--below calculated via ss to get ca_cyt_i target of 0.1162 uM-->
        <variable initial_value="194.6056" name="q_ATP" public_interface="out" units="fmol"/>
        <variable initial_value="28.7888" name="q_Pi" public_interface="out" units="fmol"/>
        <!--below number is from Luo and Rudy's value for 'capacitative membrane area, Vcap' of 
1.534e-4 cm^2; that combined with the standard 1 uF/cm^2 gets you 1.534e5 fF below
none of this explained in Pan, 2018 other than citing the area number-->
        <variable initial_value="153400" name="C_m" public_interface="out" units="fF"/>
        <!--z for Ca2+ electrogenic transport-->
        <variable initial_value="-2" name="z" public_interface="out" units="dimensionless"/>
        <!--converted to C/mol
var zF: C_per_mol;-->
        <!--zF = z*F;-->
        <!--below corresponds to Vm = -85 mV
var q_mem: fC {init: -13039, pub: out};
below to -54 mV-->
        <variable initial_value="-8.2836e+03" name="q_mem" public_interface="out" units="fC"/>
        <!--below to 20 mV-->
        <!--var q_mem: fC {init: 3068, pub: out};-->
        <!--below to 0 mV
var q_mem: fC {init: 0, pub: out};-->
    </component>
    <component name="PMCA">
        <!-- Physical parameters-->
        <variable name="t" public_interface="in" units="second"/>
        <variable name="R" public_interface="in" units="J_per_K_per_mol"/>
        <variable name="T" public_interface="in" units="kelvin"/>
        <variable name="F" public_interface="in" units="C_per_mol"/>
        <!-- Bond graph parameters    -->
        <variable name="K_P1_PMCA" public_interface="in" units="per_fmol"/>
        <variable name="K_P2_PMCA" public_interface="in" units="per_fmol"/>
        <variable name="K_P3_PMCA" public_interface="in" units="per_fmol"/>
        <variable name="K_P4_PMCA" public_interface="in" units="per_fmol"/>
        <variable name="K_Ca_i" public_interface="in" units="per_fmol"/>
        <variable name="K_Ca_ext" public_interface="in" units="per_fmol"/>
        <!--need K's for phosphates-->
        <variable name="K_ATP" public_interface="in" units="per_fmol"/>
        <variable name="K_ADP" public_interface="in" units="per_fmol"/>
        <variable name="K_Pi" public_interface="in" units="per_fmol"/>
        <!--get q's for phosphates here since fixed-->
        <variable name="q_ATP" public_interface="in" units="fmol"/>
        <variable name="q_ADP" public_interface="in" units="fmol"/>
        <variable name="q_Pi" public_interface="in" units="fmol"/>
        <variable name="kappa_PMCA_R1_2" public_interface="in" units="fmol_per_sec"/>
        <variable name="kappa_PMCA_R2_3" public_interface="in" units="fmol_per_sec"/>
        <variable name="kappa_PMCA_R3_4" public_interface="in" units="fmol_per_sec"/>
        <variable name="kappa_PMCA_R4_1" public_interface="in" units="fmol_per_sec"/>
        <variable initial_value="1.5" name="n_Ca_i" units="dimensionless"/>
        <variable initial_value="1.5" name="n_Ca_ext" units="dimensionless"/>
        <!--below number is from Luo and Rudy's value for 'capacitative membrane area, Vcap' of 
1.534e-4 cm^2; that combined with the standard 1 uF/cm^2 gets you 1.534e5 fF below
none of this explained in Pan, 2018 other than citing the area number-->
        <variable name="C_m" public_interface="in" units="fF"/>
        <variable name="z" public_interface="in" units="dimensionless"/>
        <!--converted to C/mol-->
        <variable name="zF" units="C_per_mol"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>zF</ci>
                <apply>
                    <times/>
                    <ci>z</ci>
                    <ci>F</ci>
                </apply>
            </apply>
        </math>
        <!--qmem for Vmem tracking-->
        <variable name="q_mem" public_interface="in" units="fC"/>
        <variable name="V_mem" units="volt"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>V_mem</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>q_mem</ci>
                    </apply>
                    <ci>C_m</ci>
                </apply>
            </apply>
        </math>
        <!--var I_mem_NaK: fA {pub: out};-->
        <!-- Input from global environment-->
        <variable name="q_Ca_i" public_interface="in" units="fmol"/>
        <variable name="q_Ca_ext" public_interface="in" units="fmol"/>
        <!-- gate        -->
        <variable name="q_P1_PMCA" public_interface="in" units="fmol"/>
        <variable name="q_P2_PMCA" public_interface="in" units="fmol"/>
        <variable name="q_P3_PMCA" public_interface="in" units="fmol"/>
        <variable name="q_P4_PMCA" public_interface="in" units="fmol"/>
        <!--ratios q_Ca-->
        <variable name="q_Ca_ratio" units="dimensionless"/>
        <!-- Concentrations
note: Higgins gives umol / L; we likely need to check all dimensions in this thing...-->
        <variable name="c_Ca_i" units="uM"/>
        <variable name="c_Ca_ext" units="uM"/>
        <variable initial_value="38.0" name="vol_i" units="pL"/>
        <variable name="vol_ext" units="pL"/>
        <!--steady-state ca ratio (as given by derivation in sage)
%from sagemath J_ss_pmca_from_serca_BG_wphosph_t3
cai_caext_ss_ratio_bg = (K_bg(6)/K_bg(5))*((K_bg(8)*K_bg(9)*q_adp*q_p)/(K_bg(7)*q_atp))^(2/3)-->
        <variable name="q_Ca_ratio_analytic" units="dimensionless"/>
        <!--q_Ca_ratio_analytic = K_Ca_ext/K_Ca_i*pow(K_ADP*K_Pi*q_ADP*q_Pi/(K_ATP*q_ATP), 0.6666666667{dimensionless});
below version with Vm term from sage notebokk pmca_from_higgins_Jss_BG_wVm-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_Ca_ratio_analytic</ci>
                <apply>
                    <times/>
                    <apply>
                        <divide/>
                        <apply>
                            <times/>
                            <apply>
                                <exp/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <apply>
                                            <divide/>
                                            <cn cellml:units="dimensionless">2</cn>
                                            <cn cellml:units="dimensionless">3</cn>
                                        </apply>
                                        <apply>
                                            <divide/>
                                            <ci>zF</ci>
                                            <apply>
                                                <times/>
                                                <ci>R</ci>
                                                <ci>T</ci>
                                            </apply>
                                        </apply>
                                        <ci>q_mem</ci>
                                    </apply>
                                    <ci>C_m</ci>
                                </apply>
                            </apply>
                            <ci>K_Ca_ext</ci>
                        </apply>
                        <ci>K_Ca_i</ci>
                    </apply>
                    <apply>
                        <power/>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <ci>K_ADP</ci>
                                <ci>K_Pi</ci>
                                <ci>q_ADP</ci>
                                <ci>q_Pi</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>K_ATP</ci>
                                <ci>q_ATP</ci>
                            </apply>
                        </apply>
                        <cn cellml:units="dimensionless">0.6666666667</cn>
                    </apply>
                </apply>
            </apply>
            <!--var vol_isr: pL;
just went with 100x cytosolic for now-->
            <apply>
                <eq/>
                <ci>vol_ext</ci>
                <apply>
                    <times/>
                    <ci>vol_i</ci>
                    <cn cellml:units="dimensionless">100</cn>
                </apply>
            </apply>
            <!--vol_isr = vol_i+vol_ext;-->
            <apply>
                <eq/>
                <ci>c_Ca_i</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">1000</cn>
                        <ci>q_Ca_i</ci>
                    </apply>
                    <ci>vol_i</ci>
                </apply>
            </apply>
            <!--convert mM -> uM-->
            <apply>
                <eq/>
                <ci>c_Ca_ext</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">1000</cn>
                        <ci>q_Ca_ext</ci>
                    </apply>
                    <ci>vol_ext</ci>
                </apply>
            </apply>
            <!--ca ratio-->
            <apply>
                <eq/>
                <ci>q_Ca_ratio</ci>
                <apply>
                    <divide/>
                    <ci>q_Ca_i</ci>
                    <ci>q_Ca_ext</ci>
                </apply>
            </apply>
        </math>
        <!-- Constitutive equations-->
        <variable name="mu_Ca_i" units="J_per_mol"/>
        <variable name="v_Ca_i_PMCA" public_interface="out" units="fmol_per_sec"/>
        <variable name="mu_Ca_SR" units="J_per_mol"/>
        <variable name="V_Ca_Ext_PMCA" public_interface="out" units="fmol_per_sec"/>
        <!--mu's for phosphates-->
        <variable name="mu_ATP" units="J_per_mol"/>
        <variable name="mu_ADP" units="J_per_mol"/>
        <variable name="mu_Pi" units="J_per_mol"/>
        <variable name="mu_P1" units="J_per_mol"/>
        <variable name="v_P1" units="fmol_per_sec"/>
        <variable name="mu_P2" units="J_per_mol"/>
        <variable name="v_P2" units="fmol_per_sec"/>
        <variable name="mu_P3" units="J_per_mol"/>
        <variable name="v_P3" units="fmol_per_sec"/>
        <variable name="mu_P4" units="J_per_mol"/>
        <variable name="v_P4" units="fmol_per_sec"/>
        <variable name="Af_R1_2" units="J_per_mol"/>
        <variable name="Ar_R1_2" units="J_per_mol"/>
        <variable name="Af_R2_3" units="J_per_mol"/>
        <variable name="Ar_R2_3" units="J_per_mol"/>
        <variable name="Af_R3_4" units="J_per_mol"/>
        <variable name="Ar_R3_4" units="J_per_mol"/>
        <variable name="Af_R4_1" units="J_per_mol"/>
        <variable name="Ar_R4_1" units="J_per_mol"/>
        <variable name="v_PMCA_R1_2" units="fmol_per_sec"/>
        <variable name="v_PMCA_R2_3" units="fmol_per_sec"/>
        <variable name="v_PMCA_R3_4" units="fmol_per_sec"/>
        <variable name="v_PMCA_R4_1" units="fmol_per_sec"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>mu_Ca_i</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_Ca_i</ci>
                            <ci>q_Ca_i</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_Ca_SR</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_Ca_ext</ci>
                            <ci>q_Ca_ext</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--define mu's for phosphates-->
            <apply>
                <eq/>
                <ci>mu_ATP</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_ATP</ci>
                            <ci>q_ATP</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_ADP</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_ADP</ci>
                            <ci>q_ADP</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_Pi</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_Pi</ci>
                            <ci>q_Pi</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_P1</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_P1_PMCA</ci>
                            <ci>q_P1_PMCA</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_P2</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_P2_PMCA</ci>
                            <ci>q_P2_PMCA</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_P3</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_P3_PMCA</ci>
                            <ci>q_P3_PMCA</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_P4</ci>
                <apply>
                    <times/>
                    <ci>R</ci>
                    <ci>T</ci>
                    <apply>
                        <ln/>
                        <apply>
                            <times/>
                            <ci>K_P4_PMCA</ci>
                            <ci>q_P4_PMCA</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Af_R1_2</ci>
                <apply>
                    <plus/>
                    <ci>mu_P1</ci>
                    <apply>
                        <times/>
                        <ci>n_Ca_i</ci>
                        <ci>mu_Ca_i</ci>
                    </apply>
                </apply>
            </apply>
            <!--add in Vmem term here-->
            <apply>
                <eq/>
                <ci>Ar_R1_2</ci>
                <apply>
                    <plus/>
                    <ci>mu_P2</ci>
                    <apply>
                        <times/>
                        <ci>zF</ci>
                        <ci>V_mem</ci>
                    </apply>
                </apply>
            </apply>
            <!--Ar_R1_2 = mu_P2;-->
            <!--Af_R2_3 = mu_P2;
Af for +ATP-->
            <apply>
                <eq/>
                <ci>Af_R2_3</ci>
                <apply>
                    <plus/>
                    <ci>mu_P2</ci>
                    <ci>mu_ATP</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Ar_R2_3</ci>
                <ci>mu_P3</ci>
            </apply>
            <apply>
                <eq/>
                <ci>Af_R3_4</ci>
                <ci>mu_P3</ci>
            </apply>
            <apply>
                <eq/>
                <ci>Ar_R3_4</ci>
                <apply>
                    <plus/>
                    <ci>mu_P4</ci>
                    <apply>
                        <times/>
                        <ci>n_Ca_ext</ci>
                        <ci>mu_Ca_SR</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Af_R4_1</ci>
                <ci>mu_P4</ci>
            </apply>
            <!--Ar_R4_1 = mu_P1;
Ar for +ADP + Pi-->
            <apply>
                <eq/>
                <ci>Ar_R4_1</ci>
                <apply>
                    <plus/>
                    <ci>mu_P1</ci>
                    <ci>mu_ADP</ci>
                    <ci>mu_Pi</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_PMCA_R1_2</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>kappa_PMCA_R1_2</ci>
                    <apply>
                        <minus/>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Af_R1_2</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Ar_R1_2</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_PMCA_R2_3</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>kappa_PMCA_R2_3</ci>
                    <apply>
                        <minus/>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Af_R2_3</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Ar_R2_3</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_PMCA_R3_4</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>kappa_PMCA_R3_4</ci>
                    <apply>
                        <minus/>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Af_R3_4</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Ar_R3_4</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_PMCA_R4_1</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>kappa_PMCA_R4_1</ci>
                    <apply>
                        <minus/>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Af_R4_1</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <ci>Ar_R4_1</ci>
                                <apply>
                                    <times/>
                                    <ci>R</ci>
                                    <ci>T</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_Ca_i_PMCA</ci>
                <apply>
                    <times/>
                    <apply>
                        <minus/>
                        <ci>n_Ca_i</ci>
                    </apply>
                    <ci>v_PMCA_R1_2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>V_Ca_Ext_PMCA</ci>
                <apply>
                    <times/>
                    <ci>n_Ca_ext</ci>
                    <ci>v_PMCA_R3_4</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_P1</ci>
                <apply>
                    <minus/>
                    <ci>v_PMCA_R4_1</ci>
                    <ci>v_PMCA_R1_2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_P2</ci>
                <apply>
                    <minus/>
                    <ci>v_PMCA_R1_2</ci>
                    <ci>v_PMCA_R2_3</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_P3</ci>
                <apply>
                    <minus/>
                    <ci>v_PMCA_R2_3</ci>
                    <ci>v_PMCA_R3_4</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_P4</ci>
                <apply>
                    <minus/>
                    <ci>v_PMCA_R3_4</ci>
                    <ci>v_PMCA_R4_1</ci>
                </apply>
            </apply>
            <!--state odes defined here-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_P1_PMCA</ci>
                </apply>
                <ci>v_P1</ci>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_P2_PMCA</ci>
                </apply>
                <ci>v_P2</ci>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_P3_PMCA</ci>
                </apply>
                <ci>v_P3</ci>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_P4_PMCA</ci>
                </apply>
                <ci>v_P4</ci>
            </apply>
            <!--calcium odes-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_Ca_i</ci>
                </apply>
                <ci>v_Ca_i_PMCA</ci>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_Ca_ext</ci>
                </apply>
                <ci>V_Ca_Ext_PMCA</ci>
            </apply>
        </math>
    </component>
    <connection>
        <map_components component_1="constants" component_2="PMCA"/>
        <map_variables variable_1="R" variable_2="R"/>
        <map_variables variable_1="T" variable_2="T"/>
        <map_variables variable_1="F" variable_2="F"/>
    </connection>
    <connection>
        <map_components component_1="environment" component_2="PMCA"/>
        <map_variables variable_1="t" variable_2="t"/>
        <map_variables variable_1="q_Ca_i" variable_2="q_Ca_i"/>
        <map_variables variable_1="q_Ca_ext" variable_2="q_Ca_ext"/>
        <map_variables variable_1="q_P1_PMCA" variable_2="q_P1_PMCA"/>
        <map_variables variable_1="q_P2_PMCA" variable_2="q_P2_PMCA"/>
        <map_variables variable_1="q_P3_PMCA" variable_2="q_P3_PMCA"/>
        <map_variables variable_1="q_P4_PMCA" variable_2="q_P4_PMCA"/>
        <!--vars q_mem and q_mem;-->
    </connection>
    <connection>
        <map_components component_1="PMCA_parameters" component_2="PMCA"/>
        <map_variables variable_1="kappa_PMCA_R1_2" variable_2="kappa_PMCA_R1_2"/>
        <map_variables variable_1="kappa_PMCA_R2_3" variable_2="kappa_PMCA_R2_3"/>
        <map_variables variable_1="kappa_PMCA_R3_4" variable_2="kappa_PMCA_R3_4"/>
        <map_variables variable_1="kappa_PMCA_R4_1" variable_2="kappa_PMCA_R4_1"/>
        <map_variables variable_1="K_P1_PMCA" variable_2="K_P1_PMCA"/>
        <map_variables variable_1="K_P2_PMCA" variable_2="K_P2_PMCA"/>
        <map_variables variable_1="K_P3_PMCA" variable_2="K_P3_PMCA"/>
        <map_variables variable_1="K_P4_PMCA" variable_2="K_P4_PMCA"/>
        <map_variables variable_1="K_Ca_i" variable_2="K_Ca_i"/>
        <map_variables variable_1="K_Ca_ext" variable_2="K_Ca_ext"/>
        <map_variables variable_1="C_m" variable_2="C_m"/>
        <map_variables variable_1="z" variable_2="z"/>
        <!--add K's and q's for phosph-->
        <map_variables variable_1="K_ATP" variable_2="K_ATP"/>
        <map_variables variable_1="K_ADP" variable_2="K_ADP"/>
        <map_variables variable_1="K_Pi" variable_2="K_Pi"/>
        <map_variables variable_1="q_ATP" variable_2="q_ATP"/>
        <map_variables variable_1="q_ADP" variable_2="q_ADP"/>
        <map_variables variable_1="q_Pi" variable_2="q_Pi"/>
        <map_variables variable_1="q_mem" variable_2="q_mem"/>
    </connection>
</model>
